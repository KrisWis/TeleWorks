import{r as s,j as a}from"./react-C3EGSwTV.js";import{U as w}from"./AttachFileContainerFile-lS_D1Jpc.js";import{aa as T,d as x,I as b,F as p}from"./app-routes-zXkCwipe.js";const k=new w,j=s.memo(({children:u,setFiles:i,indexedDB:t,indexedDBStoreName:r})=>{const c=s.useCallback(async e=>{const n=await k.fetchLoadedFiles(e,r);n&&i(n.map(o=>o.file))},[r,i]);return s.useEffect(()=>{T||(async()=>(t.current=await k.openDatabase(x,1,b.map(n=>n.name)),c(t.current)))()},[t,c]),a.jsx(a.Fragment,{children:u})});j.displayName="IndexedDBLoader";const I="_TransitionBetweenBlocks__disappear_1wakk_1",y="_blockdisappear_1wakk_1",V="_TransitionBetweenBlocks__appear_1wakk_17",h="_blockappear_1wakk_1",_={TransitionBetweenBlocks__disappear:I,blockdisappear:y,TransitionBetweenBlocks__appear:V,blockappear:h},F=({className:u,blocks:i,transitionDuration:t,defaultIndex:r,defaultIsMounted:c=!1})=>{const[e,n]=s.useState(i[r]),[o,m]=s.useState(null),l=s.useRef(),d=s.useRef(c);return s.useEffect(()=>{if(d.current&&!l.current)for(const B of i)B.condition&&B.id!==(e==null?void 0:e.id)&&(m(e),n(null),l.current=setTimeout(()=>{l.current=null,d.current=!0,n(B);const f=setTimeout(()=>{m(null),clearTimeout(f)},90);clearTimeout(l.current)},t));else d.current=!0},[i,t,e]),a.jsxs(p,{max:!0,align:"center",justify:"center",className:u,children:[o&&a.jsx(p,{max:!0,"data-testid":o["data-testid"]||"TransitionBetweenBlocks.PastVisibleBlock",className:_.TransitionBetweenBlocks__disappear,style:{animationDuration:`${t+100}ms`},children:o.component}),d.current?e&&a.jsx(p,{max:!0,"data-testid":e["data-testid"]||"TransitionBetweenBlocks.VisibleBlock",style:{animationDuration:`${t}ms`},className:_.TransitionBetweenBlocks__appear,children:e.component}):a.jsx(a.Fragment,{children:e&&a.jsx(p,{max:!0,"data-testid":e["data-testid"]||"TransitionBetweenBlocks.VisibleBlock",children:e.component})})]})};F.displayName="TransitionBetweenBlocks";export{j as I,F as T};
